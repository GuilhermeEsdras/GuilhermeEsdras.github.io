"use strict";btv.AbstractAlgorithm=function(e,t,i){this.tree=e,this.treeCopy=btv.AbstractAlgorithm.copyTree(this.tree),this.tree.selectedNode=void 0,this.visualiser=t,this.isSubalgorithm=Boolean(i),this.startAnimationListeners=new jsgl.util.ArrayList,this.endAnimationListeners=new jsgl.util.ArrayList,this.redoCalls=0},btv.AbstractAlgorithm.copyTree=function(e){if(null==e)return null;var t,i=new btv.BinaryTree("copy");return null!==e.getRoot()&&(i.setRoot(new btv.BinaryTreeNode(e.getRoot().getValue())),btv.AbstractAlgorithm.copyNodeRec(e.getRoot().getLeft(),e.getRoot().getRight(),i.getRoot())),null!=e.selectedNode?(t=e.selectedNode.getIndex(),i.selectedNode=i.getNode(t)):i.selectedNode=null,i},btv.AbstractAlgorithm.copyNodeRec=function(e,t,i){null!=e&&(i.setLeft(new btv.BinaryTreeNode(e.getValue())),btv.AbstractAlgorithm.copyNodeRec(e.getLeft(),e.getRight(),i.getLeft())),null!=t&&(i.setRight(new btv.BinaryTreeNode(t.getValue())),btv.AbstractAlgorithm.copyNodeRec(t.getLeft(),t.getRight(),i.getRight()))},btv.AbstractAlgorithm.prototype.redoStart=function(){var e,t;this.redoCalls++,this.visualiser.animateStart(this),this.isSubalgorithm||this.visualiser.animateRemoveArrayElem(),null!=this.treeCopy.selectedNode?(e=this.treeCopy.selectedNode.getIndex(),t=this.tree.getNode(e),this.visualiser.selectedNode!==t&&this.visualiser.animateShowSelectNode(t),this.node=t):(this.visualiser.animateSelectNode(null),this.node=null)},btv.AbstractAlgorithm.prototype.redoEnd=function(e){null!=e&&1!=e||this.visualiser.animateShowTree(),this.visualiser.animateEnd(this)},btv.AbstractAlgorithm.prototype.addStartAnimationListener=function(e){this.startAnimationListeners.add(e)},btv.AbstractAlgorithm.prototype.removeStartAnimationListener=function(e){this.startAnimationListeners.remove(e)},btv.AbstractAlgorithm.prototype.fireStartAnimationListeners=function(){for(var e=this.startAnimationListeners.getCount(),t=0;t<e;t++)this.startAnimationListeners.get(t)()},btv.AbstractAlgorithm.prototype.addEndAnimationListener=function(e){this.endAnimationListeners.add(e)},btv.AbstractAlgorithm.prototype.removeEndAnimationListener=function(e){this.endAnimationListeners.remove(e)},btv.AbstractAlgorithm.prototype.fireEndAnimationListeners=function(){for(var e=this.endAnimationListeners.getCount(),t=0;t<e;t++)this.endAnimationListeners.get(t)()},btv.AbstractAlgorithm.prototype.redo=function(){throw new btv.AlgorithmException("Abstract function")},btv.AbstractAlgorithm.prototype.undo=function(){var e=btv.AbstractAlgorithm.copyTree(this.treeCopy);this.tree.setRoot(e.getRoot())},btv.bst.RandomBSTreeAlg=function(e,t,i,s,o){this.min=i,this.max=s,btv.AbstractAlgorithm.call(this,e,t,o)},btv.bst.RandomBSTreeAlg.jsglExtend(btv.AbstractAlgorithm),btv.bst.RandomBSTreeAlg.prototype.redo=function(){var e,t;this.redoStart(),1<this.redoCalls?(e=btv.AbstractAlgorithm.copyTree(this.randomtreeCopy),this.tree.setRoot(e.getRoot())):(t=(this.max-this.min)/4,this.tree.setRoot(new btv.BinaryTreeNode(btv.getRandomInt(Math.floor(this.min+t),Math.ceil(this.max-t)))),this.rec(this.tree.getRoot(),1,this.min,this.max),this.randomtreeCopy=btv.AbstractAlgorithm.copyTree(this.tree)),this.visualiser.redrawTree(this.tree),this.redoEnd()},btv.bst.RandomBSTreeAlg.prototype.rec=function(e,t,i,s){if(!(i>=e.getValue()-1||e.getValue()+1>=s)){var o,r;if(t<=3&&Math.random()<.5)o=1;else switch(t){case 1:o=.95;break;case 2:o=.7;break;case 3:o=.4;break;case 4:o=.2;break;default:o=0}o>Math.random()&&(r=Math.round((e.getValue()-i)/2),e.setLeft(new btv.BinaryTreeNode(btv.getRandomInt(i+r,e.getValue()-1))),e.getLeft().getValue()==i&&(i+=1),this.rec(e.getLeft(),t+1,i,e.getValue()-1)),o>Math.random()&&(r=Math.round((s-e.getValue())/2),e.setRight(new btv.BinaryTreeNode(btv.getRandomInt(e.getValue()+1,s-r))),e.getRight().getValue()==s&&--s,this.rec(e.getRight(),t+1,e.getValue()+1,s))}},btv.bst.RandomBSTreeAlg.prototype.toString=function(){for(var e=this.tree.toArray(),t="arvoreAleatoria(",i=0;i<e.length;i++)0!=i&&(t+=", "),null==e[i]?t+="n":t+=e[i].getValue();return t+=")"},btv.bst.InsertAlg=function(e,t,i,s){this.value=i,btv.AbstractAlgorithm.call(this,e,t,s)},btv.bst.InsertAlg.jsglExtend(btv.AbstractAlgorithm),btv.bst.InsertAlg.prototype.redo=function(){this.redoStart(),this.visualiser.animateRemoveNode(this.node),this.node=new btv.BinaryTreeNode(this.value),this.visualiser.animateShowNodeElemNextTo(this.node,0);var e=this.tree.getRoot();if(null===e)this.tree.setRoot(this.node),this.visualiser.animateMoveTo(this.node,0);else for(;;)if(this.node.getValue()>=e.getValue()){if(this.visualiser.animateShowComparSign(this.node,!0,e),null===e.getRight()){e.setRight(this.node),this.visualiser.animateMoveTo(this.node,2*e.getIndex()+2),this.visualiser.animateAddEdgeElem(this.node);break}e=e.getRight(),this.visualiser.animateMoveNextTo(this.node,e)}else{if(this.visualiser.animateShowComparSign(this.node,!1,e),null===e.getLeft()){e.setLeft(this.node),this.visualiser.animateMoveTo(this.node,2*e.getIndex()+1),this.visualiser.animateAddEdgeElem(this.node);break}e=e.getLeft(),this.visualiser.animateMoveNextTo(this.node,e)}this.visualiser.animateSelectNode(null),this.redoEnd()},btv.bst.InsertAlg.prototype.toString=function(){return"inserir(valor: "+this.value+")"},btv.bst.FindAlg=function(e,t,i,s){this.value=i,btv.AbstractAlgorithm.call(this,e,t,s)},btv.bst.FindAlg.jsglExtend(btv.AbstractAlgorithm),btv.bst.FindAlg.prototype.redo=function(){this.redoStart(),this.visualiser.animateRemoveNode(this.node),this.node=new btv.BinaryTreeNode(this.value),this.node.selectable=!1,this.visualiser.animateShowNodeElemNextTo(this.node,0);var e=this.tree.getRoot();if(null===e)return this.visualiser.animateShowRemoveNode(this.node),this.visualiser.animateSelectNode(null),this.redoEnd(),null;for(;;){if(this.node.getValue()==e.getValue())return this.visualiser.animateShowComparSign(this.node,0,e),this.visualiser.animateMoveTo(this.node,e.getIndex()),this.visualiser.animateRemoveNode(this.node),this.visualiser.animateSelectNode(e),this.redoEnd(),e;if(this.node.getValue()>e.getValue()){if(this.visualiser.animateShowComparSign(this.node,1,e),null===e.getRight()){this.visualiser.animateMoveNextTo(this.node,2*e.getIndex()+2);break}e=e.getRight(),this.visualiser.animateMoveNextTo(this.node,e)}else{if(this.visualiser.animateShowComparSign(this.node,-1,e),null===e.getLeft()){this.visualiser.animateMoveNextTo(this.node,2*e.getIndex()+1);break}e=e.getLeft(),this.visualiser.animateMoveNextTo(this.node,e)}}return this.visualiser.animateShowRemoveNode(this.node),this.visualiser.animateSelectNode(null),this.redoEnd(),null},btv.bst.FindAlg.prototype.toString=function(){return"buscar(valor: "+this.value+")"},btv.bst.DeleteAlg=function(e,t,i,s){this.node=i,e.selectedNode=this.node,btv.AbstractAlgorithm.call(this,e,t,s)},btv.bst.DeleteAlg.jsglExtend(btv.AbstractAlgorithm),btv.bst.DeleteAlg.prototype.redo=function(){var e,t,i,s,o;this.redoStart(),null!==this.node.getLeft()&&null!==this.node.getRight()&&(e=new btv.bst.GetSuccessorAlg(this.tree,this.visualiser,this.node,!0).redo(),this.tree.swapNodes(this.node,e),this.visualiser.animateSwapNodeElems(this.node,e)),null!==this.node.getLeft()?(t=this.node.getLeft(),this.visualiser.animateShowRemoveNode(this.node),this.visualiser.animateRemoveElement(t.edgeElement),this.node.isRoot()?(this.node.setLeft(null),this.tree.setRoot(t)):this.node.getParent().getLeft()==this.node?this.node.getParent().setLeft(t):this.node.getParent().setRight(t),i=btv.BinaryTree.toInorderArrayRec(t),this.visualiser.animateMoveToIndexLoc(i),this.visualiser.animateAddEdgeElem(t,t.getParent())):null!==this.node.getRight()?(s=this.node.getRight(),this.visualiser.animateShowRemoveNode(this.node),this.visualiser.animateRemoveElement(s.edgeElement),this.node.isRoot()?(this.node.setRight(null),this.tree.setRoot(s)):this.node.getParent().getLeft()==this.node?this.node.getParent().setLeft(s):this.node.getParent().setRight(s),o=btv.BinaryTree.toInorderArrayRec(s),this.visualiser.animateMoveToIndexLoc(o),this.visualiser.animateAddEdgeElem(s,s.getParent())):(this.node.isRoot()?this.tree.setRoot(null):this.node.getParent().getLeft()===this.node?this.node.getParent().setLeft(null):this.node.getParent().setRight(null),this.visualiser.animateShowRemoveNode(this.node)),this.visualiser.animateSelectNode(null),this.redoEnd()},btv.bst.DeleteAlg.prototype.toString=function(){return"apagar(valor: "+this.treeCopy.selectedNode.getValue()+", index: "+this.treeCopy.selectedNode.getIndex()+")"},btv.bst.GetMaxAlg=function(e,t,i,s){this.node=i,e.selectedNode=this.node,btv.AbstractAlgorithm.call(this,e,t,s)},btv.bst.GetMaxAlg.jsglExtend(btv.AbstractAlgorithm),btv.bst.GetMaxAlg.prototype.redo=function(){var e,t,i,s;for(this.isSubalgorithm?(this.redoCalls++,this.visualiser.animateStart(this),e=this.treeCopy.selectedNode.getIndex(),t=this.tree.getNode(e),this.node=t):this.redoStart(),s=new btv.BinaryTreeNode(String.fromCharCode(8664)),this.visualiser.animateAddAssistNodeElemNextTo(s,this.node),null===(i=this.node).getRight()&&this.visualiser.animateShowChangeAssistNode(s,String.fromCharCode(8664),!1);null!==i.getRight();)i=i.getRight(),this.visualiser.animateShowChangeAssistNode(s,String.fromCharCode(8664),!1),this.visualiser.animateMoveNextTo(s,i);return this.visualiser.animateShowChangeAssistNode(s,String.fromCharCode(8664),!1),this.visualiser.animateShowChangeAssistNode(s,String.fromCharCode(8664),!0),this.visualiser.animateMoveTo(s,i.getIndex()),this.visualiser.animateRemoveNode(s),this.visualiser.animateSelectNode(i),this.isSubalgorithm?this.redoEnd(!1):this.redoEnd(),i},btv.bst.GetMaxAlg.prototype.toString=function(){return"getMax(valor: "+this.treeCopy.selectedNode.getValue()+", index: "+this.treeCopy.selectedNode.getIndex()+")"},btv.bst.GetMinAlg=function(e,t,i,s){this.node=i,e.selectedNode=this.node,btv.AbstractAlgorithm.call(this,e,t,s)},btv.bst.GetMinAlg.jsglExtend(btv.AbstractAlgorithm),btv.bst.GetMinAlg.prototype.redo=function(){var e,t,i,s;for(this.isSubalgorithm?(this.redoCalls++,this.visualiser.animateStart(this),e=this.treeCopy.selectedNode.getIndex(),t=this.tree.getNode(e),this.node=t):this.redoStart(),s=new btv.BinaryTreeNode(String.fromCharCode(8665)),this.visualiser.animateAddAssistNodeElemNextTo(s,this.node),null===(i=this.node).getLeft()&&this.visualiser.animateShowChangeAssistNode(s,String.fromCharCode(8665),!1);null!==i.getLeft();)i=i.getLeft(),this.visualiser.animateShowChangeAssistNode(s,String.fromCharCode(8665),!1),this.visualiser.animateMoveNextTo(s,i);return this.visualiser.animateShowChangeAssistNode(s,String.fromCharCode(8665),!1),this.visualiser.animateShowChangeAssistNode(s,String.fromCharCode(8665),!0),this.visualiser.animateMoveTo(s,i.getIndex()),this.visualiser.animateRemoveNode(s),this.visualiser.animateSelectNode(i),this.isSubalgorithm?this.redoEnd(!1):this.redoEnd(),i},btv.bst.GetMinAlg.prototype.toString=function(){return"getMin(valor: "+this.treeCopy.selectedNode.getValue()+", index: "+this.treeCopy.selectedNode.getIndex()+")"},btv.bst.GetPredecessorAlg=function(e,t,i,s){this.node=i,e.selectedNode=this.node,btv.AbstractAlgorithm.call(this,e,t,s)},btv.bst.GetPredecessorAlg.jsglExtend(btv.AbstractAlgorithm),btv.bst.GetPredecessorAlg.prototype.redo=function(){var e,t;this.redoStart();var i=new btv.BinaryTreeNode(String.fromCharCode(8665));if(this.visualiser.animateShowAssistNodeElemNextTo(i,this.node),null!==(t=this.node.getLeft())){this.visualiser.animateMoveNextTo(i,t),this.visualiser.animateRemoveNode(i);var s=new btv.bst.GetMaxAlg(this.tree,this.visualiser,t,!0).redo();return this.redoEnd(),s}for(this.visualiser.animateShowChangeAssistNode(i,String.fromCharCode(8665),!0),t=this.node,e=this.node.getParent();;){if(null===e)return this.visualiser.animateShowChangeAssistNode(i,String.fromCharCode(8657),!1),this.visualiser.animateShowChangeAssistNode(i,String.fromCharCode(8657),!0),this.visualiser.animateShowRemoveNode(i),this.visualiser.animateSelectNode(null),this.redoEnd(),null;if(this.visualiser.animateShowChangeAssistNode(i,String.fromCharCode(8657),!1),this.visualiser.animateMoveNextTo(i,e),e.getRight()===t)return this.visualiser.animateShowChangeAssistNode(i,String.fromCharCode(8598),!1),this.visualiser.animateMoveTo(i,e.getIndex()),this.visualiser.animateRemoveNode(i),this.visualiser.animateSelectNode(e),this.redoEnd(),e;this.visualiser.animateShowChangeAssistNode(i,String.fromCharCode(8598),!0),e=(t=e).getParent()}},btv.bst.GetPredecessorAlg.prototype.toString=function(){return"getPredecessor(valor: "+this.treeCopy.selectedNode.getValue()+", index: "+this.treeCopy.selectedNode.getIndex()+")"},btv.bst.GetSuccessorAlg=function(e,t,i,s){this.node=i,e.selectedNode=this.node,btv.AbstractAlgorithm.call(this,e,t,s)},btv.bst.GetSuccessorAlg.jsglExtend(btv.AbstractAlgorithm),btv.bst.GetSuccessorAlg.prototype.redo=function(){var e,t;this.redoStart();var i=new btv.BinaryTreeNode(String.fromCharCode(8664));if(this.visualiser.animateShowAssistNodeElemNextTo(i,this.node),null!==(t=this.node.getRight())){this.visualiser.animateMoveNextTo(i,t),this.visualiser.animateRemoveNode(i);var s=new btv.bst.GetMinAlg(this.tree,this.visualiser,t,!0).redo();return this.redoEnd(),s}for(this.visualiser.animateShowChangeAssistNode(i,String.fromCharCode(8664),!0),t=this.node,e=this.node.getParent();;){if(null===e)return this.visualiser.animateShowChangeAssistNode(i,String.fromCharCode(8657),!1),this.visualiser.animateShowChangeAssistNode(i,String.fromCharCode(8657),!0),this.visualiser.animateShowRemoveNode(i),this.visualiser.animateSelectNode(null),this.redoEnd(),null;if(this.visualiser.animateShowChangeAssistNode(i,String.fromCharCode(8657),!1),this.visualiser.animateMoveNextTo(i,e),e.getLeft()===t)return this.visualiser.animateShowChangeAssistNode(i,String.fromCharCode(8599),!1),this.visualiser.animateMoveTo(i,e.getIndex()),this.visualiser.animateRemoveNode(i),this.visualiser.animateSelectNode(e),this.redoEnd(),e;this.visualiser.animateShowChangeAssistNode(i,String.fromCharCode(8599),!0),e=(t=e).getParent()}},btv.bst.GetSuccessorAlg.prototype.toString=function(){return"getSuccessor(valor: "+this.treeCopy.selectedNode.getValue()+", index: "+this.treeCopy.selectedNode.getIndex()+")"},btv.bst.ToPreorderArrayAlg=function(e,t,i){this.moveNode=null,btv.AbstractAlgorithm.call(this,e,t,i)},btv.bst.ToPreorderArrayAlg.jsglExtend(btv.AbstractAlgorithm),btv.bst.ToPreorderArrayAlg.prototype.redo=function(){var e=new Array;this.redoStart(),this.visualiser.animateAddArrayElem(this.tree.getCount()),this.moveNode=new btv.BinaryTreeNode(String.fromCharCode(8659)),this.visualiser.animateShowAssistNodeElemNextTo(this.moveNode,0);var t=this.tree.getRoot();return null===t?(this.visualiser.animateShowChangeAssistNode(this.moveNode,String.fromCharCode(8659),!0),this.visualiser.animateShowRemoveNode(this.moveNode)):(this.rec(t,e),this.visualiser.animateShowChangeAssistNode(this.moveNode,String.fromCharCode(8657)),this.visualiser.animateRemoveNode(this.moveNode)),this.redoEnd(),e},btv.bst.ToPreorderArrayAlg.prototype.recLeft=function(e,t){this.visualiser.animateShowChangeAssistNode(this.moveNode,String.fromCharCode(8665)),null!==e?(this.visualiser.animateMoveNextTo(this.moveNode,e),this.rec(e,t)):this.visualiser.animateShowChangeAssistNode(this.moveNode,String.fromCharCode(8665),!0)},btv.bst.ToPreorderArrayAlg.prototype.recRight=function(e,t){this.visualiser.animateShowChangeAssistNode(this.moveNode,String.fromCharCode(8664)),null!==e?(this.visualiser.animateMoveNextTo(this.moveNode,e),this.rec(e,t)):this.visualiser.animateShowChangeAssistNode(this.moveNode,String.fromCharCode(8664),!0)},btv.bst.ToPreorderArrayAlg.prototype.rec=function(e,t){this.visualiser.animateChangeAssistNode(this.moveNode,"");var i=new btv.BinaryTreeNode(e.getValue());i.selectable=!1,this.visualiser.animateShowNodeElemAt(i,e),this.visualiser.animateMoveNextToArrayElem(i),this.visualiser.animateShowTree(.25),this.visualiser.animateRemoveNode(i),t.push(e),this.visualiser.animateShowInsertToArrayElem(e,t.length-1),this.recLeft(e.getLeft(),t),null!==e.getLeft()&&(this.visualiser.animateShowChangeAssistNode(this.moveNode,String.fromCharCode(8657)),this.visualiser.animateMoveNextTo(this.moveNode,e)),this.recRight(e.getRight(),t),null!==e.getRight()&&(this.visualiser.animateShowChangeAssistNode(this.moveNode,String.fromCharCode(8657)),this.visualiser.animateMoveNextTo(this.moveNode,e))},btv.bst.ToPreorderArrayAlg.prototype.toString=function(){return"preOrdem()"},btv.bst.ToInorderArrayAlg=function(e,t,i){this.moveNode=null,btv.AbstractAlgorithm.call(this,e,t,i)},btv.bst.ToInorderArrayAlg.jsglExtend(btv.AbstractAlgorithm),btv.bst.ToInorderArrayAlg.prototype.redo=function(){var e=new Array;this.redoStart(),this.visualiser.animateAddArrayElem(this.tree.getCount()),this.moveNode=new btv.BinaryTreeNode(String.fromCharCode(8659)),this.visualiser.animateShowAssistNodeElemNextTo(this.moveNode,0);var t=this.tree.getRoot();return null===t?(this.visualiser.animateShowChangeAssistNode(this.moveNode,String.fromCharCode(8659),!0),this.visualiser.animateShowRemoveNode(this.moveNode)):(this.rec(t,e),this.visualiser.animateShowChangeAssistNode(this.moveNode,String.fromCharCode(8657)),this.visualiser.animateRemoveNode(this.moveNode)),this.redoEnd(),e},btv.bst.ToInorderArrayAlg.prototype.recLeft=function(e,t){this.visualiser.animateShowChangeAssistNode(this.moveNode,btv.Visualiser.southWestDoubleArrow),null!==e?(this.visualiser.animateMoveNextTo(this.moveNode,e),this.rec(e,t)):this.visualiser.animateShowChangeAssistNode(this.moveNode,btv.Visualiser.southWestDoubleArrow,!0)},btv.bst.ToInorderArrayAlg.prototype.recRight=function(e,t){this.visualiser.animateShowChangeAssistNode(this.moveNode,btv.Visualiser.southEastDoubleArrow),null!==e?(this.visualiser.animateMoveNextTo(this.moveNode,e),this.rec(e,t)):this.visualiser.animateShowChangeAssistNode(this.moveNode,btv.Visualiser.southEastDoubleArrow,!0)},btv.bst.ToInorderArrayAlg.prototype.rec=function(e,t){this.recLeft(e.getLeft(),t),null!==e.getLeft()&&(this.visualiser.animateShowChangeAssistNode(this.moveNode,String.fromCharCode(8657)),this.visualiser.animateMoveNextTo(this.moveNode,e)),this.visualiser.animateChangeAssistNode(this.moveNode,"");var i=new btv.BinaryTreeNode(e.getValue());i.selectable=!1,this.visualiser.animateShowNodeElemAt(i,e),this.visualiser.animateMoveNextToArrayElem(i),this.visualiser.animateShowTree(.25),this.visualiser.animateRemoveNode(i),t.push(e),this.visualiser.animateShowInsertToArrayElem(e,t.length-1),this.recRight(e.getRight(),t),null!==e.getRight()&&(this.visualiser.animateShowChangeAssistNode(this.moveNode,String.fromCharCode(8657)),this.visualiser.animateMoveNextTo(this.moveNode,e))},btv.bst.ToInorderArrayAlg.prototype.toString=function(){return"emOrdem()"},btv.bst.ToPostorderArrayAlg=function(e,t,i){this.moveNode=null,btv.AbstractAlgorithm.call(this,e,t,i)},btv.bst.ToPostorderArrayAlg.jsglExtend(btv.AbstractAlgorithm),btv.bst.ToPostorderArrayAlg.prototype.redo=function(){var e=new Array;this.redoStart(),this.visualiser.animateAddArrayElem(this.tree.getCount()),this.moveNode=new btv.BinaryTreeNode(String.fromCharCode(8659)),this.visualiser.animateShowAssistNodeElemNextTo(this.moveNode,0);var t=this.tree.getRoot();return null===t?(this.visualiser.animateShowChangeAssistNode(this.moveNode,String.fromCharCode(8659),!0),this.visualiser.animateShowRemoveNode(this.moveNode)):(this.rec(t,e),this.visualiser.animateShowChangeAssistNode(this.moveNode,String.fromCharCode(8657)),this.visualiser.animateRemoveNode(this.moveNode)),this.redoEnd(),e},btv.bst.ToPostorderArrayAlg.prototype.recLeft=function(e,t){this.visualiser.animateShowChangeAssistNode(this.moveNode,btv.Visualiser.southWestDoubleArrow),null!==e?(this.visualiser.animateMoveNextTo(this.moveNode,e),this.rec(e,t)):this.visualiser.animateShowChangeAssistNode(this.moveNode,btv.Visualiser.southWestDoubleArrow,!0)},btv.bst.ToPostorderArrayAlg.prototype.recRight=function(e,t){this.visualiser.animateShowChangeAssistNode(this.moveNode,btv.Visualiser.southEastDoubleArrow),null!==e?(this.visualiser.animateMoveNextTo(this.moveNode,e),this.rec(e,t)):this.visualiser.animateShowChangeAssistNode(this.moveNode,btv.Visualiser.southEastDoubleArrow,!0)},btv.bst.ToPostorderArrayAlg.prototype.rec=function(e,t){this.recLeft(e.getLeft(),t),null!==e.getLeft()&&(this.visualiser.animateShowChangeAssistNode(this.moveNode,String.fromCharCode(8657)),this.visualiser.animateMoveNextTo(this.moveNode,e)),this.recRight(e.getRight(),t),null!==e.getRight()&&(this.visualiser.animateShowChangeAssistNode(this.moveNode,String.fromCharCode(8657)),this.visualiser.animateMoveNextTo(this.moveNode,e)),this.visualiser.animateChangeAssistNode(this.moveNode,"");var i=new btv.BinaryTreeNode(e.getValue());i.selectable=!1,this.visualiser.animateShowNodeElemAt(i,e),this.visualiser.animateMoveNextToArrayElem(i),this.visualiser.animateShowTree(.25),this.visualiser.animateRemoveNode(i),t.push(e),this.visualiser.animateShowInsertToArrayElem(e,t.length-1)},btv.bst.ToPostorderArrayAlg.prototype.toString=function(){return"posOrdem()"},btv.bh.HeapifyUpAlg=function(e,t,i,s){this.node=i,e.selectedNode=this.node,btv.AbstractAlgorithm.call(this,e,t,s)},btv.bh.HeapifyUpAlg.jsglExtend(btv.AbstractAlgorithm),btv.bh.HeapifyUpAlg.prototype.redo=function(){this.redoStart(),this.rec(this.node),this.visualiser.animateSelectNode(null),this.redoEnd(!1)},btv.bh.HeapifyUpAlg.prototype.rec=function(e){var t,i=e.getParent();null!=i&&(t=i.getValue()-this.node.getValue(),i.getLeft()===this.node?this.visualiser.animateShowComparSign(this.node,-t,i):this.visualiser.animateShowComparSign(i,t,this.node),0<=t||(this.tree.swapNodes(this.node,i),this.visualiser.animateSwapNodeElems(this.node,i),this.rec(this.node)))},btv.bh.HeapifyUpAlg.prototype.toString=function(){return"heapify-up(value: "+this.treeCopy.selectedNode.getValue()+", index: "+this.treeCopy.selectedNode.getIndex()+")"},btv.bh.HeapifyDownAlg=function(e,t,i,s){this.node=i,e.selectedNode=this.node,btv.AbstractAlgorithm.call(this,e,t,s)},btv.bh.HeapifyDownAlg.jsglExtend(btv.AbstractAlgorithm),btv.bh.HeapifyDownAlg.prototype.redo=function(){this.redoStart(),this.rec(this.node),this.visualiser.animateSelectNode(null),this.redoEnd(!1)},btv.bh.HeapifyDownAlg.prototype.rec=function(e){var t,i,s=e.getLeft(),o=e.getRight();e.isLeaf()||(null!=s&&null!=o?s.getValue()>=o.getValue()?(t=s,this.visualiser.animateShowComparSign(s,!0,o)):(t=o,this.visualiser.animateShowComparSign(s,!1,o)):t=s,i=e.getValue()-t.getValue(),t===s?this.visualiser.animateShowComparSign(t,-i,e):this.visualiser.animateShowComparSign(e,i,t),i<0&&(this.tree.swapNodes(e,t),this.visualiser.animateSwapNodeElems(e,t),this.rec(e)))},btv.bh.HeapifyDownAlg.prototype.toString=function(){return"heapify-down(value: "+this.treeCopy.selectedNode.getValue()+", index: "+this.treeCopy.selectedNode.getIndex()+")"},btv.bh.RandomBHeapAlg=function(e,t,i,s,o){if(s<i)throw new btv.AlgorithmException("Given minimum is greather than given maximum.");this.min=i,this.max=s,btv.AbstractAlgorithm.call(this,e,t,o)},btv.bh.RandomBHeapAlg.jsglExtend(btv.AbstractAlgorithm),btv.bh.RandomBHeapAlg.prototype.redo=function(){if(this.redoStart(),1<this.redoCalls){var e=btv.AbstractAlgorithm.copyTree(this.randomHeapCopy);this.tree.setRoot(e.getRoot())}else{for(var t=btv.getRandomInt(1,Math.min(this.max-this.min+1,31)),i=new Array(this.max-this.min+1),s=new Array,o=0;o<t;o++){for(;s[o]=btv.getRandomInt(Math.ceil(this.min),Math.floor(this.max)),1==i[s[o]-this.min];);i[s[o]-this.min]=!0}for(o=Math.floor(s.length/2)-1;0<=o;o--)this.arrayHeapify(s,o);this.tree.build(s),this.randomHeapCopy=btv.AbstractAlgorithm.copyTree(this.tree)}this.visualiser.redrawTree(this.tree),this.redoEnd(!0)},btv.bh.RandomBHeapAlg.prototype.arrayHeapify=function(e,t){var i,s=2*t+1,o=2*t+2,r=s<e.length&&e[s]>e[t]?s:t;o<e.length&&e[o]>e[r]&&(r=o),r!=t&&(i=e[r],e[r]=e[t],e[t]=i,this.arrayHeapify(e,r))},btv.bh.RandomBHeapAlg.prototype.buildRec=function(e,t){},btv.bh.RandomBHeapAlg.prototype.toString=function(){for(var e=this.tree.toArray(),t="randomHeap(",i=0;i<e.length;i++)0!=i&&(t+=", "),t+=e[i].getValue();return t+=")"},btv.bh.BuildHeapAlg=function(e,t,i,s){this.array=i,btv.AbstractAlgorithm.call(this,e,t,s)},btv.bh.BuildHeapAlg.jsglExtend(btv.AbstractAlgorithm),btv.bh.BuildHeapAlg.prototype.redo=function(){this.redoStart();var e=this.array.slice();for(this.tree.build(e),this.visualiser.redrawTree(this.tree),this.visualiser.animateShowTree(),i=Math.floor(e.length/2)-1;0<=i;i--){new btv.bh.HeapifyDownAlg(this.tree,this.visualiser,this.tree.getNode(i),!0).redo()}this.visualiser.animateSelectNode(null),this.redoEnd(!1)},btv.bh.BuildHeapAlg.prototype.toString=function(){for(var e=this.array,t="buildHeap(",i=0;i<e.length;i++)0!=i&&(t+=", "),t+=e[i];return t+=")"},btv.bh.InsertAlg=function(e,t,i,s){this.value=i,btv.AbstractAlgorithm.call(this,e,t,s)},btv.bh.InsertAlg.jsglExtend(btv.AbstractAlgorithm),btv.bh.InsertAlg.prototype.redo=function(){this.redoStart(),this.node=new btv.BinaryTreeNode(this.value);var e=this.tree.getCount();if(null==this.tree.getRoot())return this.tree.setRoot(this.node),this.visualiser.animateAddNodeElem(this.node),this.visualiser.animateShowSelectNode(this.node),this.visualiser.animateSelectNode(null),void this.redoEnd();this.visualiser.animateAddNodeElemAt(this.node,e),this.visualiser.animateShowSelectNode(this.node);var t=Math.floor((e-1)/2),i=this.tree.getNode(t);e%2==1?i.setLeft(this.node):i.setRight(this.node),this.visualiser.animateAddEdgeElem(this.node),this.visualiser.animateShowTree(),new btv.bh.HeapifyUpAlg(this.tree,this.visualiser,this.node,!0).redo(),this.visualiser.animateSelectNode(null),this.redoEnd()},btv.bh.InsertAlg.prototype.toString=function(){return"inserir(valor: "+this.value+")"},btv.bh.DeleteAlg=function(e,t,i,s){this.node=i,e.selectedNode=this.node,btv.AbstractAlgorithm.call(this,e,t,s)},btv.bh.DeleteAlg.jsglExtend(btv.AbstractAlgorithm),btv.bh.DeleteAlg.prototype.redo=function(){this.redoStart();var e=this.tree.getCount();if(1==e)return this.tree.setRoot(null),this.visualiser.animateShowRemoveNode(this.node),void this.redoEnd();var t=this.tree.getNode(e-1);if(this.node===t)return this.node.getParent().getLeft()===this.node?this.node.getParent().setLeft(null):this.node.getParent().setRight(null),this.visualiser.animateShowRemoveNode(this.node),void this.redoEnd();this.tree.swapNodes(this.node,t),this.visualiser.animateSwapNodeElems(this.node,t),this.node.getParent().getLeft()===this.node?this.node.getParent().setLeft(null):this.node.getParent().setRight(null),this.visualiser.animateShowRemoveNode(this.node);var i=new btv.bh.HeapifyUpAlg(this.tree,this.visualiser,t,!0);i.redo(),(i=new btv.bh.HeapifyDownAlg(this.tree,this.visualiser,t,!0)).redo(),this.redoEnd()},btv.bh.DeleteAlg.prototype.toString=function(){return"deletar(valor: "+this.treeCopy.selectedNode.getValue()+", index: "+this.treeCopy.selectedNode.getIndex()+")"},btv.bh.ExtractMaxAlg=function(e,t,i){btv.AbstractAlgorithm.call(this,e,t,i)},btv.bh.ExtractMaxAlg.jsglExtend(btv.AbstractAlgorithm),btv.bh.ExtractMaxAlg.prototype.redo=function(){var e=this.tree.getRoot();return this.redoStart(),null!==e&&new btv.bh.DeleteAlg(this.tree,this.visualiser,e,!0).redo(),this.redoEnd(!1),e},btv.bh.ExtractMaxAlg.prototype.toString=function(){return"extractMax()"},btv.bh.GetMaxAlg=function(e,t,i){btv.AbstractAlgorithm.call(this,e,t,i)},btv.bh.GetMaxAlg.jsglExtend(btv.AbstractAlgorithm),btv.bh.GetMaxAlg.prototype.redo=function(){var e=this.tree.getRoot();return this.redoStart(),null!==e&&this.visualiser.animateSelectNode(e),this.redoEnd(),e},btv.bh.GetMaxAlg.prototype.toString=function(){return"getMax()"},btv.bh.HeapSortAlg=function(e,t,i){btv.AbstractAlgorithm.call(this,e,t,i)},btv.bh.HeapSortAlg.jsglExtend(btv.AbstractAlgorithm),btv.bh.HeapSortAlg.prototype.redo=function(){var e,t,i=new Array,s=this.tree.getCount();this.redoStart(),this.visualiser.animateAddArrayElem(s);for(var o=s-1;1<=o;o--){e=this.tree.getRoot(),t=this.tree.getNode(o),this.visualiser.animateSelectNode(t),this.visualiser.animateShowTree(),null!=t.getParent()&&(t.getParent().getLeft()===t?t.getParent().setLeft(null):t.getParent().setRight(null)),t.setLeft(e.getLeft()),t.setRight(e.getRight()),this.tree.setRoot(t),this.visualiser.animateSwapNodeElems(e,t);var r=new btv.BinaryTreeNode(e.getValue());r.selectable=!1,this.visualiser.animateAddNodeElemAt(r,o),this.visualiser.animateRemoveNode(e),this.visualiser.animateMoveNextToArrayElem(r),this.visualiser.animateShowTree(.25),this.visualiser.animateRemoveNode(r),this.visualiser.animateShowInsertToArrayElem(e,o),i.push(e),new btv.bh.HeapifyDownAlg(this.tree,this.visualiser,t,!0).redo()}var a=new btv.BinaryTreeNode(this.tree.getRoot().getValue());a.selectable=!1,this.visualiser.animateAddNodeElemAt(a,0),this.visualiser.animateRemoveNode(this.tree.getRoot()),this.visualiser.animateMoveNextToArrayElem(a),this.visualiser.animateShowTree(.25),this.visualiser.animateRemoveNode(a),this.visualiser.animateShowInsertToArrayElem(this.tree.getRoot(),0),i.push(this.tree.getRoot());var n=btv.AbstractAlgorithm.copyTree(this.treeCopy);return this.tree.setRoot(n.getRoot()),this.visualiser.animateRedrawTree(this.tree),this.redoEnd(),i.reverse(),i},btv.bh.HeapSortAlg.prototype.toString=function(){return"heapSort()"};